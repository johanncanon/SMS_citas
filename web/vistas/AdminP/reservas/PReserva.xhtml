<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">


    <ui:composition template="./../template-admin-p.xhtml">

        <ui:define name="content">
            <b:container>
                <b:row>
                    <b:column col-lg="9" col-md="9" col-xs="8" col-sm="12" >

                        <div class="box box-danger direct-chat direct-chat-danger mrg-cl-1" style="padding-bottom: 20px; padding-left: 20px; padding-right: 20px">
                            <div class="box-header with-border" style="margin-bottom: 12px">
                                <i class="fa fa-car"></i>
                                <h3 class="box-title">Reservación de Vehiculo SMS Renta</h3>
                            </div>
                            <h:form>
                                <p:growl id="growl" sticky="true" showDetail="true"/>
                                <p:wizard flowListener="#{agendaBean.onFlowProcess}">

                                    <p:tab id="Ciudad" title="Ciudad">
                                        <b:panel title="Ingrese Ciudad de Destino"  look="primary" style="text-decoration: none">
                                            <p:messages autoUpdate="true"/>
                                            <p style="margin-top: 12px">La ciudad de destino es el lugar en el
                                                cual será recogido por nuestro Conductor:</p>
                                            <hr/>
                                            <h:panelGrid columns="2" width="100%" cellpadding="5">

                                                <div style="left: 50%; position: relative;">
                                                    <i class="fa fa-2x fa-globe"></i>
                                                    <span class="label-cl">Ciudad: </span>                                                   
                                                </div>
                                                <b:selectOneMenu requiredMessage="Indique ciudad donde quiere solicitar el servicio"  required="true" style="width: 100%" value="#{agendaBean.ciudadView.ciudadNombre}">
                                                    <f:selectItem itemLabel="Seleccione Ciudad" noSelectionOption="true"/>
                                                    <f:selectItems value="#{ciudadBean.nombresCiudadesListView}"/>
                                                </b:selectOneMenu>

                                                <div style="left: 50%; position: relative;">
                                                    <i class="fa fa-2x"></i>
                                                    <span class="label-cl">Lugar de recogida: </span>                                                   
                                                </div>
                                                <b:inputText style="width: 100%" placeholder="Lugar de recogida" required="true" requiredMessage="Indique lugar de recogida" value="#{agendaBean.reservaView.reservacionLugarLlegada}"/>

                                                <div style="left: 50%; position: relative;">
                                                    <i class="fa fa-2x"></i>
                                                    <span class="label-cl">Lugar de destino: </span>                                                   
                                                </div>
                                                <b:inputText style="width: 100%" placeholder="Lugar de destino" required="true" requiredMessage="Indique lugar de destino" value="#{agendaBean.reservaView.reservacionLugarDestino}"/>
                                            </h:panelGrid>
                                        </b:panel>
                                    </p:tab>

                                    <p:tab id="Agendamiento" title="Agendamiento">
                                        <b:panel title="Fechas de la reservación" look="primary" >                                           

                                            <p:messages autoUpdate="true"/>
                                            <p style="margin-top: 12px">Aqui podrá definir la fecha de inicio del servicio y la fecha de 
                                                final del servicio SMS:</p>
                                            <hr/>                                           

                                            <h:panelGrid columns="4" cellpadding="2">

                                                <p:outputLabel for="CFechaInicio" value="Fecha de Inicio:" style="font-weight: 800"/>                                                    
                                                <p:calendar id="CFechaInicio" style="width: 100%" value="#{agendaBean.agendaView.agendaFechaInicio}" pattern="yyyy-MM-dd" required="true"/> 

                                                <p:outputLabel for="CHoraInicio" style="font-weight: 800" value="Hora de inicio:" />
                                                <p:calendar id="CHoraInicio" style="width: 100%" value="#{agendaBean.agendaView.agendaHoraInicio}" required="true" pattern="HH:mm:ss" timeOnly="true"/>
                                            </h:panelGrid>
                                            <hr/>
                                            <h:panelGrid columns="4" cellpadding="2">        
                                                <p:outputLabel style="font-weight: 800" for="CFechaEntrega" value="Fecha de Entrega:" />
                                                <p:calendar id="CFechaEntrega" style="width: 100%" value="#{agendaBean.agendaView.agendaFechaLlegada}" pattern="yyyy-MM-dd" required="true"/> 

                                                <p:outputLabel style="font-weight: 800" for="CHoraEntrega" value="Hora de Entrega:" /> 
                                                <p:calendar id="CHoraEntrega"  style="width: 100%" value="#{agendaBean.agendaView.agendaHoraLlegada}" required="true" pattern="HH:mm:ss" timeOnly="true"/> 

                                            </h:panelGrid>                                           
                                        </b:panel>
                                    </p:tab>

                                    <p:tab id="Vehiculo" title="Vehiculo">
                                        <b:panel title="Defina la categoria y el servicio" look="primary">
                                            <p:messages autoUpdate="true" />
                                            <p style="margin-top: 12px">Aqui podrá elegir el vehiculo que desea para su reservacion:</p>
                                            <hr/>
                                            <div class="form-group">                                     
                                                <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                                                    <p:outputLabel value="Categoria de Vehiculo: "  />
                                                    <b:selectOneMenu value="#{agendaBean.categoriaView.categoriaNombre}" style="width:250px">
                                                        <f:selectItem itemLabel="Seleccione categoria del vehiculo" noSelectionOption="true"/>
                                                        <f:selectItems value="#{categoriaBean.nombresCategoriasListView}"/>
                                                    </b:selectOneMenu>                                                       
                                                </h:panelGrid>
                                                <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                                                    <p:outputLabel value="Vehiculo Seleccionado "  />
                                                    <b:inputText placeholder="Placa del vehiculo" required="true" style="width:250px" requiredMessage="No ha seleccionado vehiculo" value="#{agendaBean.vehiculoView.vehPlaca}"/>                                                      
                                                </h:panelGrid>
                                                <b:commandButton value="Seleccionar nuevo vehiculo"/>
                                            </div>
                                            <div class="form-group box box-danger direct-chat direct-chat-danger">                                               
                                                <p:dataScroller var="vehiculo" mode="inline" scrollHeight="500" id="ScrollerVehiculos" value="#{agendaBean.vehiculosListView}" chunkSize="5">
                                                    <f:facet name="header">
                                                        Explore hacia abajo para cargar mas vehiculos.
                                                    </f:facet>

                                                    <f:facet name="loader">
                                                        <p:commandButton type="button" value="Mas" icon="ui-icon-circle-triangle-s"/>
                                                    </f:facet>

                                                    <h:panelGrid columns="2" style="width:100%" columnClasses="logo,detail">
                                                        <p:graphicImage width="256" height="256" value="/resources/images/upload/Vehiculos/#{vehiculo.vehFotoNombre}" alt="Vehiculo"/>
                                                        
                                                        <p:outputPanel>
                                                            <h:panelGrid columns="2" cellpadding="5">
                                                                <h:outputText value="Placa:" />
                                                                <h:outputText value="#{vehiculo.vehPlaca}" style="font-weight: bold"/>

                                                                <h:outputText value="Color:" />
                                                                <h:outputText value="#{vehiculo.vehColor}" style="font-weight: bold"/>

                                                                <h:outputText value="Personas:" />
                                                                <h:outputText value="#{vehiculo.vehNumPersonas}" style="font-weight: bold"/>

                                                                <h:outputText value="Maletas grandes:" />
                                                                <h:outputText value="#{vehiculo.vehNumMalGrande}" style="font-weight: bold"/>

                                                                <h:outputText value="Maletas pequeños:" />
                                                                <h:outputText value="#{vehiculo.vehNumMalPequeña}" style="font-weight: bold"/>

                                                                <p:commandButton value="Seleccionar Vehiculo" disabled="#{agendaBean.selecVeh}"  process="@this" update="@form" action="#{agendaBean.SeleccionarVehiculo()}">
                                                                    <f:setPropertyActionListener value="#{vehiculo}" target="#{agendaBean.vehiculoView}"/>
                                                                </p:commandButton>
                                                            </h:panelGrid>
                                                        </p:outputPanel>
                                                    </h:panelGrid>
                                                    <p:separator/>
                                                </p:dataScroller>                                                
                                            </div>
                                        </b:panel>
                                    </p:tab>

                                    <p:tab id="Conductor" title="Conductor">
                                        <p:messages />                                       
                                        <p style="margin-top: 12px">Aqui podrá elegir el conductor que desea para su reservacion</p>
                                        <hr/>
                                        <div class="box box-danger direct-chat direct-chat-danger">
                                            <p:dataScroller var="empleado" id="ScrollerConductores" value="#{agendaBean.empleadosListView}" chunkSize="5" >
                                                <f:facet name="header">
                                                    Explore hacia abajo para cargar mas conductores.
                                                </f:facet>

                                                <f:facet name="loader">
                                                    <p:commandButton type="button" value="Mas" icon="ui-icon-circle-triangle-s"/>
                                                </f:facet>

                                                <h:panelGrid columns="2" style="width:100%" columnClasses="logo,detail">
                                                    <p:graphicImage width="160" height="180" value="/resources/images/upload/#{empleado.smsUsuario.usuarioFotoNombre}"/> 

                                                    <p:outputPanel>
                                                        <h:panelGrid columns="2" cellpadding="5">

                                                            <h:outputText value="Nombre y apellidos:" />
                                                            <h:outputText value="#{empleado.smsUsuario.usuarioNombre}" style="font-weight: bold"/>

                                                            <h:outputText value="Identificacion" />
                                                            <h:outputText value="#{empleado.smsUsuario.usuarioCc}" style="font-weight: bold"/>

                                                            <p:commandButton  value="Seleccionar Conductor" disabled="#{agendaBean.selecCon}"  process="@this" update="ScrollerConductores" action="#{agendaBean.SeleccionarConductor()}">
                                                                <f:setPropertyActionListener value="#{empleado}" target="#{agendaBean.empleadoView}"/>
                                                            </p:commandButton>
                                                        </h:panelGrid>
                                                    </p:outputPanel>
                                                </h:panelGrid>
                                                <p:separator/>
                                            </p:dataScroller>
                                        </div>                                        
                                    </p:tab>


                                    <p:tab id="Confirmacion" title="Confirmación">
                                        <b:panel title="Confirmación" look="primary">
                                            <h:panelGrid id="confirmacion" columns="3" columnClasses="grid,grid,grid">
                                                <p:outputLabel value="Placa: #{agendaBean.vehiculoView.vehPlaca}"/>
                                                <p:outputLabel value="Conductor: #{agendaBean.empleadoView.smsUsuario.usuarioNombre}"/>
                                                <p:inputTextarea rows="3" placeholder="Notas de la reservacion" value="#{agendaBean.reservaView.reservacionNotas}"/>
                                            </h:panelGrid>
                                            <p:commandButton value="Registrar" action="#{agendaBean.registrarAgenda()}" update="@form" process="@this"/>
                                        </b:panel>
                                    </p:tab>
                                </p:wizard>
                            </h:form>
                        </div>
                    </b:column>                                           
                </b:row>
            </b:container>
        </ui:define>
    </ui:composition>
</html>
